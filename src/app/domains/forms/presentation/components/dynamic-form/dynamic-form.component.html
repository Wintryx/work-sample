@if (formGroup(); as formGroup) {
    <form (ngSubmit)="onSubmit()" [formGroup]="formGroup" class="flex flex-col gap-6">
        <!-- Form Header -->
        <div class="border-b border-slate-200 pb-4 mb-2">
            <h2 class="text-xl font-bold text-slate-800">{{ formConfig().title }}</h2>
            @if (formConfig().description) {
                <p class="text-sm text-slate-500 mt-1">{{ formConfig().description }}</p>
            }
        </div>

        <!-- Grid Layout -->
        <div class="grid grid-cols-12 gap-6">
            @for (field of formConfig().fields; track field.key) {
                @if (!field.permissions?.hidden) {
                    <app-dynamic-field-host
                        [control]="getControl(field.key)"
                        [field]="field">
                    </app-dynamic-field-host>
                }
            }
        </div>

        <!-- Actions -->
        <div class="flex justify-end pt-6 border-t border-slate-200 mt-4">
            <button [disabled]="formGroup.invalid || formGroup.pristine" color="primary" mat-flat-button type="submit">
                <mat-icon class="mr-2">save</mat-icon>
                Save Changes
            </button>
        </div>
    </form>
}
